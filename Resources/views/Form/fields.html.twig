{% block sidus_bootstrap_collection_widget %}
    {% spaceless %}
        {% if prototype is defined %}
            {% set prototype_vars = {} %}
            {% if style is defined %}
                {% set prototype_vars = prototype_vars|merge({'style': style}) %}
            {% endif %}
            {% set field = prototype %}
            {% set prototype_html = block('sidus_bootstrap_collection_item') %}
            {% set attr = attr|merge({'data-prototype': prototype_html }) %}
            {% set attr = attr|merge({'data-prototype-name': prototype_name }) %}
        {% endif %}
        <div {{ block('widget_container_attributes') }}>
            <ul class="bootstrap-collection {{ sortable ? 'sortable-collection' }}"
                data-input-pattern="{{ prototype.vars.full_name }}">
                {% for field in form %}
                    <li{% if form_has_error(field) %} class="has-error"{% endif %}>{{ block('sidus_bootstrap_collection_item') }}</li>
                {% endfor %}
            </ul>
            {{ form_errors(form) }}
            {% if form.vars.allow_add %}
                <a href="#{{ form.vars.id }}" class="btn btn-success"
                   data-addfield="collection" data-collection="{{ form.vars.id }}"
                   data-prototype-name="{{ prototype_name }}" title="{{ form.vars.add_button_text|trans }}">
                    <i class="fa fa-plus"></i>
                </a>
            {% endif %}
        </div>
    {% endspaceless %}
{% endblock %}

{% block sidus_bootstrap_collection_item %}
    {% if form_has_error(field) %}
        <i class="fa fa-warning"></i>
    {% endif %}
    {% if not form.vars.disabled and form.vars.sortable %}
        <i class="fa fa-bars position-handler"></i>
    {% endif %}
    {{ form_widget(field) }}
    {% if form.vars.allow_delete %}
        <a href="#" class="btn btn-danger pull-right remove-action" data-removefield="collection"
           data-field="{{ field.vars.id }}" title="{{ form.vars.delete_button_text|trans }}">
            <i class="fa fa-trash-o"></i>
        </a>
    {% endif %}
    {{ form_errors(field) }}
{% endblock %}

{% block sidus_bootstrap_collection_label %}
    {% set widget_add_btn = false %}
    {{ block('form_label') }}
{% endblock %}

{% block autocomplete_row %}
    {{ block('form_row') }}
{% endblock %}

{% block sidus_switch_widget -%}
    {% spaceless %}
        <div class="sidus-switch">
            <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
            <label for="{{ id }}">
                <span class="slider"></span>
            </label>
        </div>
    {% endspaceless %}
{%- endblock %}
